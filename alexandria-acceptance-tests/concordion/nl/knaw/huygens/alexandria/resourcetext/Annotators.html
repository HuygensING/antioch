<?xml version="1.0" encoding="UTF-8"?><html xmlns:c="http://www.concordion.org/2007/concordion" xmlns:h="http://huygens.knaw.nl/concordion-acceptance-test" xmlns:xsi="http://www.w3.org/1999/xhtml" xsi:schemaLocation="http://huygens.knaw.nl/concordion-acceptance-test                           http://huygensing.github.io/alexandria/xsd/concordion-rest.xsd"><head><style>* {
  font-family: Arial;
}
body {
  padding: 32px;  
}
pre {
  padding: 6px 28px 6px 28px;
  background-color: #E8EEF7;
}
pre, pre *, code, code *, kbd {
  font-family: Courier New, Courier;
  font-size: 10pt;
}
h1, h1 * {
  font-size: 24pt;	
}
p, td, th, li, .breadcrumbs {
  font-size: 10pt;
}
p, li {
  line-height: 140%;
  max-width: 720px;
}
table {
  border-collapse: collapse;
  empty-cells: show;
  margin: 8px 0px 8px 0px;
}
th, td {
  border: 1px solid black;
  padding: 3px;
}
td {
  background-color: white;
  vertical-align: top;
}
th {
  background-color: #C3D9FF;
}
li {
  margin-top: 6px;
  margin-bottom: 6px; 
}

.example {
  padding: 6px 16px 6px 16px;
  border: 1px solid #C3D9FF;
  margin: 6px 0px 28px 0px;
  background-color: #F5F9FD;
}
.example h3 {
  margin-top: 8px;
  margin-bottom: 8px;
  font-size: 12pt;
}

p.success {
  padding: 2px;
}
.success, .success * {
  background-color: #afa !important;
}
.success pre {
  background-color: #bbffbb;
}
.failure, .failure * {
  background-color: #ffb0b0;
  padding: 1px;
}
.failure .expected {
  text-decoration: line-through;
  color: #bb5050;
}
.ignored, .ignored * {
  background-color: #f0f0f0 !important;	
}

ins {
  text-decoration: none;	
}

.exceptionMessage {
  background-color: #fdd;
  font-family: Courier New, Courier, Monospace;
  font-size: 10pt;
  display: block;
  font-weight: normal;
  padding: 4px;
  text-decoration: none !important;
}
.stackTrace, .stackTrace * {
  font-weight: normal;
}
.stackTrace {
  display: none;
  padding: 1px 4px 4px 4px;
  background-color: #fdd;
  border-top: 1px dotted black;
}
.stackTraceExceptionMessage {
  display: block;
  font-family: Courier New, Courier, Monospace;
  font-size: 8pt;
  white-space: wrap;
  padding: 1px 0px 1px 0px;
}
.stackTraceEntry {
  white-space: nowrap;
  font-family: Courier New, Courier, Monospace;
  display: block;
  font-size: 8pt;
  padding: 1px 0px 1px 32px;
}
.stackTraceButton {
  font-size: 8pt;
  margin: 2px 8px 2px 0px;
  font-weight: normal;
  font-family: Arial;
}

.special {
  font-style: italic;
}
.missing, .missing * {
  background-color: #ff9999;
  color:#bb5050;
  text-decoration: line-through;
}
.surplus, .surplus * {
  background-color: #ff9999;
}
.footer {
  text-align: right;
  margin-top: 40px;
  font-size: 8pt;
  width: 100%;
  color: #999;
}
.footer .testTime {
  padding: 2px 10px 0px 0px;
}

.idea {
  font-size: 9pt;
  color: #888;
  font-style: italic;	
}
.tight li {
  margin-top: 1px;
  margin-bottom: 1px; 
}
.commentary {
  float: right;
  width: 200px;
  background-color: #ffffd0;
  padding:8px;
  border: 3px solid #eeeeb0;	 
  margin: 10px 0px 10px 10px;	 
}
.commentary, .commentary * {
  font-size: 8pt;
}
</style><meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<title>Annotators</title>

<link type="text/css" rel="stylesheet" href="../../../../../codemirror/codemirror.css" /><link type="text/css" rel="stylesheet" href="../../../../../codemirror/enable-codemirror.css" /><link type="text/css" rel="stylesheet" href="../../../../../codemirror/merge.css" /><script type="text/javascript" src="../../../../../codemirror/codemirror.js"></script><script type="text/javascript" src="../../../../../codemirror/javascript.js"></script><script type="text/javascript" src="../../../../../codemirror/diff_match_patch.js"></script><script type="text/javascript" src="../../../../../codemirror/merge.js"></script><script type="text/javascript" src="../../../../../codemirror/enable-codemirror.js"></script><link type="text/css" rel="stylesheet" href="../../../../../bootstrap/bootstrap.css" /><link type="text/css" rel="stylesheet" href="../../../../../bootstrap/enable-bootstrap.css" /><script type="text/javascript" src="../../../../../jquery/jquery.min.js"></script><script type="text/javascript" src="../../../../../bootstrap/bootstrap.min.js"></script></head><body><span class="breadcrumbs"><a href="../Alexandria.html">Alexandria</a> &gt;</span>






























<div class="container"><div class="jumbotron"><h1>Annotators</h1></div><div class="row"><div class="col-md-3"><ul class="nav nav-pills nav-stacked"><li class="active"><a href="#annotator" data-toggle="tab">1) Annotators</a></li><li><a href="#create-annotator" data-toggle="tab">2) How do I create an annotator and retrieve its content?</a></li><li><a href="#create-annotator-with-empty-body" data-toggle="tab">3) What happens when I put an empty body?</a></li><li><a href="#create-annotator-with-code-mismatch" data-toggle="tab">4) What happens when I create an annotator with a code that does not match the URL?</a></li><li><a href="#update-annotator" data-toggle="tab">5) What happens when I update the description of an annotator?</a></li><li><a href="#get-annotators" data-toggle="tab">6) How can I retrieve all annotators of a resource?</a></li><li><a href="#annotator-defined-on-parent-resource" data-toggle="tab">7) Can I use an annotator defined on a parent resource?</a></li><li><a href="#annotator-defined-on-subresource" data-toggle="tab">8) Can I use an annotator defined on a subresource?</a></li><li><a href="#override-definition" data-toggle="tab">9) Can I override the definition of an annotator in a subresource of the resource on which it is defined?</a></li><li><a href="#define-annotator-with-used-code" data-toggle="tab">10) Can I define annotators with the same code in unrelated resources?</a></li></ul></div><div class="col-md-9"><div class="tab-content"><div id="annotator" class="tab-pane fade active in"><div class="panel panel-default"><div class="panel-heading"><strong>1) Annotators</strong></div><div class="panel-body">
Given an internal resource, i.e. a resource with text stored in Alexandria, one can annotate fragments of the text.
Such text annotations always have a responsibility attached to them.
The agent (tool or person) responsible for the annotation is called the annotator. In XML we use the attribute @resp for specifying the annotator.
The value of this attribute must be the code of an annotator that has been stored before the text annotation can be processed.
<br />
Note: The name "resp" is used by TEI. The name is hardcoded in Alexandria. Users must confirm to this convention.
</div></div></div><div id="create-annotator" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>2) How do I create an annotator and retrieve its content?</strong></div><div class="panel-body">

	Given a confirmed resource
	with id <code c:set="#uuid">00000000-0000-0000-0000-000000000001</code>
	<span c:execute="resourceExists(#uuid)">exists</span>.<br />

  <div h:request="">
    When I <code class="put">/resources/00000000-0000-0000-0000-000000000001/annotators/abc</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "description" : "Annotator description"
  }
}</pre>
    using
    <code name="Content-Type" h:setHeader="" class="set-header">application/json</code>,<br />
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">201 Created</code></li>
      <li>and the response body is <code h:responseBody="" class="empty success"> </code></li>
    </ul>
  </div>
 
   <div h:request="">
    Next, when I <code class="get">/resources/00000000-0000-0000-0000-000000000001/annotators/abc</code>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">200 OK</code></li>
      <li>and body
        <pre class="json rest-success">{
  "annotator" : {
    "code" : "abc",
    "description" : "Annotator description",
    "^resource" : "https://{host}/resources/00000000-0000-0000-0000-000000000001"
  }
}</pre>
      </li>
    </ul>
  </div>
</div></div></div><div id="create-annotator-with-empty-body" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>3) What happens when I put an empty body?</strong></div><div class="panel-body">

  Given a confirmed resource
  with id <code c:set="#uuid">00000000-0000-0000-0000-000000000002</code>
  <span c:execute="resourceExists(#uuid)">exists</span>.<br />

  <div h:request="">
    When I <code class="put">/resources/00000000-0000-0000-0000-000000000002/annotators/abc</code>
    the empty body:
    <pre>
    </pre>
    using
    <code name="Content-Type" h:setHeader="" class="set-header">application/json</code>,<br />
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">400 Bad Request</code></li>
      <li>and the response body is 
        <pre class="json rest-success">[ {
  "message" : "may not be null"
} ]</pre>
      </li>
    </ul>
  </div>
</div></div></div><div id="create-annotator-with-code-mismatch" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>4) What happens when I create an annotator with a code that does not match the URL?</strong></div><div class="panel-body">

  Given a confirmed resource
  with id <code c:set="#uuid">00000000-0000-0000-0000-000000000003</code>
  <span c:execute="resourceExists(#uuid)">exists</span>.<br />

  <div h:request="">
    When I <code class="put">/resources/00000000-0000-0000-0000-000000000003/annotators/abc</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "code" : "def",
    "description" : "Annotator description"
  }
}</pre>
    using
    <code name="Content-Type" h:setHeader="" class="set-header">application/json</code>,<br />
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">400 Bad Request</code></li>
      <li>and the response body is 
        <pre class="json rest-success">[ {
  "message" : "Entity 'code' must match the one used in the URL"
} ]</pre>
      </li>
    </ul>
  </div>
</div></div></div><div id="update-annotator" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>5) What happens when I update the description of an annotator?</strong></div><div class="panel-body">

  Given a confirmed resource
  with id <code c:set="#uuid">00000000-0000-0000-0000-000000000004</code>
  <span c:execute="resourceExists(#uuid)">exists</span>.<br />

  <div h:request="">
    Given that I have
    <span h:success="" class="success">successfully</span>
    set annotator <code>abc</code>
    by <code class="put">/resources/00000000-0000-0000-0000-000000000004/annotators/abc</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "description" : "Annotator description"
  }
}</pre>
    using
    <code name="Content-Type" h:setHeader="" class="set-header">application/json</code>
  </div>
  
  <div h:request="">
    When I <code class="put">/resources/00000000-0000-0000-0000-000000000004/annotators/abc</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "description" : "Another annotator description"
  }
}</pre>
    using
    <code name="Content-Type" h:setHeader="" class="set-header">application/json</code>,<br />
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">204 No Content</code></li>
      <li>and the response body is <code h:responseBody="" class="empty success"> </code></li>
    </ul>
  </div>
 
  <div h:request="">
    Next, when I <code class="get">/resources/00000000-0000-0000-0000-000000000004/annotators/abc</code>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">200 OK</code></li>
      <li>and body
        <pre class="json rest-success">{
  "annotator" : {
    "code" : "abc",
    "description" : "Another annotator description",
    "^resource" : "https://{host}/resources/00000000-0000-0000-0000-000000000004"
  }
}</pre>
      </li>
    </ul>
  </div>
</div></div></div><div id="get-annotators" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>6) How can I retrieve all annotators of a resource?</strong></div><div class="panel-body">

  Given a confirmed resource
  with id <code c:set="#uuid">00000000-0000-0000-0000-000000000005</code>
  <span c:execute="resourceExists(#uuid)">exists</span>.<br />

  <div h:request="">
    When I <code class="get">/resources/00000000-0000-0000-0000-000000000005/annotators</code>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">200 OK</code></li>
      <li>and body
        <pre class="json rest-success">[ ]</pre>
      </li>
    </ul>
  </div>
 
  <div h:request="">
    Next, given that I have
    <span h:success="" class="success">successfully</span>
    set annotator <code>abc</code>
    by <code class="put">/resources/00000000-0000-0000-0000-000000000005/annotators/abc</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "description" : "Annotator abc"
  }
}</pre>
  </div>
 
  <div h:request="">
    Now, when I <code class="get">/resources/00000000-0000-0000-0000-000000000005/annotators</code>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">200 OK</code></li>
      <li>and body
        <pre class="json rest-success">[ {
  "annotator" : {
    "code" : "abc",
    "description" : "Annotator abc",
    "^resource" : "https://{host}/resources/00000000-0000-0000-0000-000000000005"
  }
} ]</pre>
      </li>
    </ul>
  </div>
 
  <div h:request="">
    Next, given that I have
    <span h:success="" class="success">successfully</span>
    set annotator <code>def</code>
    by <code class="put">/resources/00000000-0000-0000-0000-000000000005/annotators/def</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "description" : "Annotator def"
  }
}</pre>
  </div>
 
  <div h:request="">
    Now, when I <code class="get">/resources/00000000-0000-0000-0000-000000000005/annotators</code>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">200 OK</code></li>
      <li>and body
        <pre class="json rest-success">[ {
  "annotator" : {
    "code" : "abc",
    "description" : "Annotator abc",
    "^resource" : "https://{host}/resources/00000000-0000-0000-0000-000000000005"
  }
}, {
  "annotator" : {
    "code" : "def",
    "description" : "Annotator def",
    "^resource" : "https://{host}/resources/00000000-0000-0000-0000-000000000005"
  }
} ]</pre>
      </li>
    </ul>
    Note that the order of the annotators is (as yet) unspecified.
  </div>
</div></div></div><div id="annotator-defined-on-parent-resource" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>7) Can I use an annotator defined on a parent resource?</strong></div><div class="panel-body">

  Yes, annotators are valid for all subresources of the resource for which they are defined.<br />
  <br />
  Given:
  <ul>
    <li c:execute="resourceExists(#uuid)">
        a (confirmed parent) resource exists with uuid: <code c:set="#uuid">00000000-0000-0000-0000-000000000006</code>
    </li>
    <li c:execute="#uuid2 = hasSubresource(#uuid)">
        this resource has a confirmed subresource: <code c:echo="#uuid2">d2ca40b3-a7c7-4bc5-b8a5-2d469dcd2d9c</code>
    </li>
    <li>
		  <div h:request="">
		    I have
		    <span h:success="" class="success">successfully</span>
		    set annotator <code>abc</code>
		    by <code class="put">/resources/00000000-0000-0000-0000-000000000006/annotators/abc</code>
		    the body:
		    <pre class="json">{
  "annotator" : {
    "description" : "Annotator abc"
  }
}</pre>
		  </div>
    </li>
  </ul>
 
  <div h:request="">
    Now, when I <code class="get">/resources/d2ca40b3-a7c7-4bc5-b8a5-2d469dcd2d9c/annotators</code>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">200 OK</code></li>
      <li>and body
        <pre class="json rest-success">[ {
  "annotator" : {
    "code" : "abc",
    "description" : "Annotator abc",
    "^resource" : "https://{host}/resources/00000000-0000-0000-0000-000000000006"
  }
} ]</pre>
      </li>
    </ul>
  </div>
 
  <div h:request="">
    Next, I
    <span h:success="" class="success">successfully</span>
    set annotator <code>def</code>
    by <code class="put">/resources/d2ca40b3-a7c7-4bc5-b8a5-2d469dcd2d9c/annotators/def</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "description" : "Annotator def"
  }
}</pre>
  </div>

  <div h:request="">
    Now, when I <code class="get">/resources/d2ca40b3-a7c7-4bc5-b8a5-2d469dcd2d9c/annotators</code>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">200 OK</code></li>
      <li>and body
        <pre class="json rest-success">[ {
  "annotator" : {
    "code" : "def",
    "description" : "Annotator def",
    "^resource" : "https://{host}/resources/d2ca40b3-a7c7-4bc5-b8a5-2d469dcd2d9c"
  }
}, {
  "annotator" : {
    "code" : "abc",
    "description" : "Annotator abc",
    "^resource" : "https://{host}/resources/00000000-0000-0000-0000-000000000006"
  }
} ]</pre>
      </li>
    </ul>
  Note that the order of the annotators is (as yet) unspecified.
  </div>
</div></div></div><div id="annotator-defined-on-subresource" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>8) Can I use an annotator defined on a subresource?</strong></div><div class="panel-body">

  No, annotators are only valid for subresources of the resource for which they are defined.<br />
 
  Given:
  <ul>
    <li c:execute="resourceExists(#uuid)">
        a (confirmed parent) resource exists with uuid: <code c:set="#uuid">00000000-0000-0000-0000-000000000007</code>
    </li>
    <li c:execute="#uuid2 = hasSubresource(#uuid)">
        this resource has a confirmed subresource: <code c:echo="#uuid2">a71bc0bb-a4b9-4544-a9d3-84d1a6b9870b</code>
    </li>
    <li>
      <div h:request="">
        I have
        <span h:success="" class="success">successfully</span>
        set annotator <code>abc</code>
        by <code class="put">/resources/a71bc0bb-a4b9-4544-a9d3-84d1a6b9870b/annotators/abc</code>
        the body:
        <pre class="json">{
  "annotator" : {
    "description" : "Annotator abc"
  }
}</pre>
      </div>
    </li>
  </ul>

  <div h:request="">
    Now, when I <code class="get">/resources/00000000-0000-0000-0000-000000000007/annotators</code>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">200 OK</code></li>
      <li>and body
        <pre class="json rest-success">[ ]</pre>
      </li>
    </ul>
  </div>
</div></div></div><div id="override-definition" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>9) Can I override the definition of an annotator in a subresource of the resource on which it is defined?</strong></div><div class="panel-body">

  No, annotators are defined by their code and these must be unique in a chain of (sub)resources.<br />
 
  Given:
  <ul>
    <li c:execute="resourceExists(#uuid)">
        a (confirmed parent) resource exists with uuid: <code c:set="#uuid">00000000-0000-0000-0000-000000000008</code>
    </li>
    <li c:execute="#uuid2 = hasSubresource(#uuid)">
        this resource has a confirmed subresource: <code c:echo="#uuid2">9b54fbb0-f761-499f-8cee-feb4ddf2cceb</code>
    </li>
    <li>
      <div h:request="">
        I have
        <span h:success="" class="success">successfully</span>
        set annotator <code>abc</code>
        by <code class="put">/resources/00000000-0000-0000-0000-000000000008/annotators/abc</code>
        the body:
        <pre class="json">{
  "annotator" : {
    "description" : "Annotator abc"
  }
}</pre>
      </div>
    </li>
  </ul>

  <div h:request="">
    When I
    <code class="put">/resources/9b54fbb0-f761-499f-8cee-feb4ddf2cceb/annotators/abc</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "description" : "Annotator abc"
  }
}</pre>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">409 Conflict</code></li>
      <li>and body
        <pre class="json rest-success">{
  "error" : {
    "message" : "Annotator 'abc' already defined in (sub)resource chain."
  }
}</pre>
      </li>
    </ul>
  </div>
</div></div></div><div id="define-annotator-with-used-code" c:execute="clearStorage()" class="tab-pane fade"><div class="panel panel-default"><div class="panel-heading"><strong>10) Can I define annotators with the same code in unrelated resources?</strong></div><div class="panel-body">

	Yes you can. This allows you, for instance, to use a generic code for
	the editor of a collections of letters, provides it is done at the proper level
	in the resource hierarchy.<br />
 
  Given:
  <ul>
    <li c:execute="resourceExists(#uuid)">
        a (confirmed parent) resource exists with uuid: <code c:set="#uuid">00000000-0000-0000-0000-000000000009</code>
    </li>
    <li c:execute="#uuid2 = hasSubresource(#uuid)">
        this resource has a confirmed subresource A: <code c:echo="#uuid2">bb640d1e-d700-42a1-b182-3af59b8a13fc</code>
    </li>
    <li c:execute="#uuid3 = hasSubresource(#uuid)">
        and another confirmed subresource B: <code c:echo="#uuid3">04175840-329e-4451-980a-69dcf8c3cea1</code>
    </li>
    <li>
      <div h:request="">
        I have
        <span h:success="" class="success">successfully</span>
        set annotator <code>ed</code> on A
        by <code class="put">/resources/bb640d1e-d700-42a1-b182-3af59b8a13fc/annotators/ed</code>
        the body:
        <pre class="json">{
  "annotator" : {
    "description" : "Editor of A"
  }
}</pre>
      </div>
    </li>
  </ul>

  <div h:request="">
    When I set annotator <code>ed</code> on B by
    <code class="put">/resources/04175840-329e-4451-980a-69dcf8c3cea1/annotators/ed</code>
    the body:
    <pre class="json">{
  "annotator" : {
    "description" : "Editor of B"
  }
}</pre>
    then I should receive
    <ul>
      <li>status <code h:status="" class="success">201 Created</code></li>
      <li>and an empty response body <code h:responseBody="" class="empty success"> </code></li>
    </ul>
  </div>
</div></div></div></div></div></div></div><div class="footer">Results generated by <a href="http://www.concordion.org" style="font-weight: bold; text-decoration: none; color: #89C;">Concordion</a><div class="testTime">in 784 ms on 14-Jun-2016 at 11:44:58 CEST</div></div></body>
</html>